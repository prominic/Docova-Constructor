# Default server configuration
server {
server_name {{ id }};
root /var/html/www/docova/web;
server_tokens off;
include /etc/nginx/nginx-docova-common.conf;
# DEV
#location / {
##try to serve file directly, fallback to app.php
#try_files $uri /app.php$is_args$args;
#autoindex on;
#}
# This rule should only be placed on your development environment
# In production, don't include this and don't deploy app_dev.php or config.php
#location ~ ^/(app_dev|config)\.php(/|$) {
#fastcgi_pass unix:/var/run/php/php7.1-fpm.sock;
#fastcgi_split_path_info ^(.+\.php)(/.*)$;
#include fastcgi_params;
#fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
#fastcgi_param DOCUMENT_ROOT $realpath_root;
#}
# PROD
location ~ ^/app\.php(/|$) {
fastcgi_pass unix:/var/run/php/php7.1-fpm.sock;
fastcgi_split_path_info ^(.+\.php)(/.*)$;
include fastcgi_params;
fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
fastcgi_param DOCUMENT_ROOT $realpath_root;
internal;
}
location ~ \.php$ {
fastcgi_pass unix:/var/run/php/php7.1-fpm.sock;
fastcgi_split_path_info ^(.+\.php)(/.*)$;
fastcgi_param SCRIPT_FILENAME $fastcgi_script_name;
fastcgi_param DOCUMENT_ROOT $realpath_root;
}
fastcgi_buffer_size 128k;
fastcgi_buffers 4 256k;
fastcgi_busy_buffers_size 256k;
error_log /var/log/nginx/project_error.log;
access_log /var/log/nginx/project_access.log;
}