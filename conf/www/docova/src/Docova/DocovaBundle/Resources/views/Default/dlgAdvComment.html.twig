<!DOCTYPE HTML>
<html>
<head>
<title>{% trans %}User Comment{% endtrans %}</title>
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="0">
<META HTTP-EQUIV="EXPIRES" CONTENT="0">
<link rel="stylesheet" href="{{ asset('bundles/docova/css/smoothness/jquery-ui.css') }}" type="text/css" />
<link rel="stylesheet" href="{{ asset('bundles/docova/css/styleDialogBase.css') }}"	type="text/css" />
<script type="text/javascript" language="JavaScript" src="{{ asset('bundles/docova/jquery/jquery.js') }}"></script>
<script type="text/javascript" language="JavaScript" src="{{ asset('bundles/docova/jquery/jquery-ui.js') }}"></script>
<script language="JavaScript" type="text/javascript" src="{{ asset('bundles/docova/js/commonFunctions.js') }}" charset="UTF-8"></script>
{% include 'DocovaBundle:Default:scriptMessagesTranslation.html.twig' %}
<script language="JavaScript" type="text/javascript">
var info = {
  "UserName" : "{{ user.getUserNameDn|replace({'\\': '\\\\'}) }}",
  "UserNameAB" : "{{ user.getUserNameDnAbbreviated|replace({'\\': '\\\\'}) }}",
  "UserNameCN" : "{{ f_Name("[CN]", user.getUserNameDnAbbreviated)|replace({'\\': '\\\\'}) }}",
  "UserRoles" : "$$WebClient;[Administration]",
  "HTTP_Referer" : "",
  "Query_String" : "",
  "Query_String_Decoded" : "",
  "Path_Info_Decoded" : "{{ path('docova_advancedcomments') }}",
  "ServerName" : "{{ app.request.server.get('HTTP_HOST') }}",
  "NsfName" : "{{ path('docova_homepage')[1:path('docova_homepage')|length - 2] }}",
  "ServerUrl" : "{{ app.request.getscheme }}://{{ app.request.server.get('HTTP_HOST') }}",
  "PortalWebPath" : "{{ path('docova_homepage')[:path('docova_homepage')|length - 1] }}",
  "PortalNsfName" : "{{ path('docova_homepage')[1:path('docova_homepage')|length - 2] }}"
};
function getinfovar(){
   return info;
}		

var parentWin = window.top.Docova.GlobalStorage["divDlgGetAdvComment"].sourcewindow;

document.oncontextmenu=stopContextMenu();
function stopContextMenu(){ return false; }

$(document).ready(function(){
    $("#btnSendTo").button({
    		text: false
    	}).click(function(event){
    		parent.Docova.Utils.showAddressDialog({ fieldname: "SendTo", dlgtype: "multi", sourcedocument: document});
    		event.preventDefault();
	})
})

// -------------------------- OnLoad initialization ----------------------------------------------
function initDialog()
{
	InitVars(info);

	if(parentWin.dlgParams[0] == "1"){
		$("#Notify").css("display", "block");
	} else if(parentWin.dlgParams[0] == "2") {
		$("#AutoNotify").prop("checked", true)
		$("#AutoNotify").prop("disabled", true);
		$("#Notify").css("display", "block");
	}

	if(parentWin.dlgParams[1] == 1) {
		$("#InfoText").html("Notify Author")
		$('#Notify').val(1);
	} else if(parentWin.dlgParams[1] == 2) {
		$("#InfoText").html("Notify Approved Workflow Participants")
		$('#Notify').val(2);
	} else if(parentWin.dlgParams[1] == 3) {
		$("#InfoText").html("Notify Author & Approved Workflow Participants")
		$('#Notify').val(3);
	}		
	$("#Comment").focus();
}
</script>
</head>
<body text="#000000" bgcolor="white" class="dlgBody" SCROLL="no" onload="initDialog();">
	<div id="dlgContentNh" class="ui-widget" style="width:100%;">
    	<table class="tblFields" width="100%" border="0" cellspacing="0" cellpadding="0">
    		<tr valign="top">
    			<td width="100%" class="frmLabel">{% trans %}Please enter your comments{% endtrans %}:</td>
    		</tr>
    		<tr>
    			<td style="border-bottom:1px #CCC solid; padding-bottom:7px;"><textarea style="width:400px;" class="txFld" id="Comment" name="Comment" rows = "4"></textarea></td>
    		</tr>
    		<tr>
    			<td width="100%" class="frmLabel">{% trans %}Notification{% endtrans %}:</td>
    		</tr>
    		<tr>
    			<td>
    				<div id="Notify" class="frmText" style="display:none;clear:both;">&nbsp;&nbsp;&nbsp;<input type="checkbox" id="AutoNotify" name="AutoNotify" value="1" /><span id="InfoText"></span></div>
    				{% trans %}Recipient(s){% endtrans %}:
    				<button id="btnSendTo" class="ui-icon-group"></button>
    			</td>
    		</tr>
    		<tr>
    			<td><textarea class="frmText" style="width:400px; margin-bottom:5px;padding:2px;" id="SendTo" name="SendTo" cols="50" rows="2" contenteditable="false"></textarea></td>
    		</tr>
    		<tr>
    			<td>{% trans %}Subject{% endtrans %}:</td>
    		</tr>
    		<tr>
    			<td><input name="Subject" value="" id="Subject" class="txFld" style="width:400px;margin-bottom:5px;padding:2px;"></td>
    		</tr>
    		<tr>
    			<td>{% trans %}Message{% endtrans %}:</td>
    		</tr>
    		<tr>
    			<td><textarea style="width:400px;padding:2px;" class="frmText" id="Body" name="Body" rows = "3"></textarea></td>
    		</tr>
    	</table>
	</div>
	<!------------------ SUBFORM sfKillCache ------------>
	<!------------------Microsoft suggestion to force no cacheing of documents------------>
<HEAD>
	<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
	<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="0">
	<META HTTP-EQUIV="EXPIRES" CONTENT="0">
</HEAD>
<!------------------END SUBFORM sfKillCache  ------------>
</body>
</html>