<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>{% trans %}Check in files{% endtrans %}</title>
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="0">
<META HTTP-EQUIV="EXPIRES" CONTENT="0">
<link rel="stylesheet" href="{{ asset('bundles/docova/css/styleViewDialogBase.css') }}" type="text/css" />
<script language="JavaScript" type="text/javascript" src="{{ asset('bundles/docova/js/commonFunctions.js') }}" charset="UTF-8"></script>
{% include 'DocovaBundle:Default:scriptMessagesTranslation.html.twig' %}
<script language="JavaScript" type="text/javascript">
var params= window.dialogArguments;
var dlgForm = null; //declare global variable to represent current form
var dlgDoc = null;
var info = {
  "UserName" : "{{ user.getUserNameDn|replace({'\\': '\\\\'}) }}",
  "UserNameAB" : "{{ user.getUserNameDnAbbreviated|replace({'\\': '\\\\'}) }}",
  "UserNameCN" : "{{ user.getUserProfile.getDisplayName }}",
  "UserRoles" : "$$WebClient;[User]",
  "HTTP_Referer" : "",
  "Query_String" : "",
  "Query_String_Decoded" : "",
  "Path_Info_Decoded" : "{{ path('docova_checkinfilesdialog') }}",
  "ServerName" : "{{ app.request.server.get('HTTP_HOST') }}",
  "NsfName" : "{{ path('docova_homepage')[1: path('docova_homepage')|length - 2] }}",
  "ServerUrl"  :"{{ app.request.getscheme }}://{{ app.request.server.get('HTTP_HOST') }}",
  "PortalWebPath" : "{{ path('docova_homepage')[:path('docova_homepage')|length - 1] }}",
  "PortalNsfName" : "{{ path('docova_homepage')[1:path('docova_homepage')|length - 2] }}"
};
function getinfovar(){
   return info;
}		

document.oncontextmenu=stopContextMenu;

// For convenience
function stopContextMenu()
{
return false;
}

function completeWizard()
{
	var retArray = new Array();
		{
		if(dlgDoc.nSelect.length) //multiple fields
		{
			for( var k=0; k<dlgDoc.nSelect.length; k++)
				{
					if(dlgDoc.nSelect[k].checked)
					{
						retArray[retArray.length] = dlgDoc.nSelectVal[k].value;
					}
				}
		}
		else
		{
			retArray[retArray.length] = dlgDoc.nSelectVal.value;
		}
		if(retArray.length == 0)
			{
			thingFactory.MessageBox("{% trans %}Please select at least one file.{% endtrans %}", 16, "{% trans %}Invalid selection{% endtrans %}" );
			return false;
			}
		}

	window.returnValue=retArray;
	window.close();
}

function cancelWizard()
{
	window.returnValue=false;
	window.close();
}

// -------------------------- OnLoad initialization ----------------------------------------------
function initDialog()
{
	//Global variables for convenience
	dlgDoc = document.all;
	InitVars(info);
	if(params)
		{
		var objNode = null;
		var selectorHTML =  '<input type="checkbox"  name="nSelect" id = "nSelect"/>' ;
		selectorHTML += '<input type="hidden" id = "nSelectVal" datafld="filename"/>';
		if(params.length > 0)
			{
			dlgDoc.nodeSelector.innerHTML = selectorHTML ;
			}

		var xmlText = "<cofiles>";
		while( (objNode = params.nextNode()))
			{
			xmlText += objNode.xml;
			}
			xmlText += "</cofiles>";
			dlgDoc.ProcessData.loadXML(xmlText);
		}

}
</script>
</head>
<body text="#000000" bgcolor="white" class="dlgBody" SCROLL="no" onload="initDialog();">
	<download id="dwn" style="behavior:url(#default#download)" />
	<!-- Subform -- thingFactory -->
	<script src="{{ path('docova_dlextensions') }}" language="javascript"></script>
	<!-- End Subform -- thingFactory -->
	<xml id="ProcessData"></xml>

	<table class="DlgTable" width="100%" border="0" cellspacing="0" cellpadding="0">
		<tr valign="top">
			<td width="100%"><img width="1" height="1" src="{{ asset('bundles/docova/images/icons/ecblank.gif') }}" border="0" alt=""></td>
		</tr>
		<tr valign="top">
			<td class="DlgContentCell" width="100%">
				<div id="dlgContentNh" style="width: 100%;">
					<span id="FieldLabel" class="txFldLabel">{% trans %}Please select the files to check in{% endtrans %}:</span>
					<table width="100%" border="0" cellspacing="0" cellpadding="0">
						<tr valign="top">
							<td width="100%" colspan="3">
								<table id="tblDataEdit" datasrc="#ProcessData" border=0 style="width: 100%; border-collapse: collapse; table-layout: fixed; margin-top: 3px;">
									<!------------------------------------------------------------>
									<thead>
										<tr style="background-color: #efefef;">
											<td style="width: 30px; font: normal 11px Verdana, Ariall; border-bottom: 1px solid silver;">&nbsp;</td>
											<td style="width: 220px; font: normal 11px Verdana, Ariall; border-bottom: 1px solid silver;">{% trans %}File{% endtrans %}</td>
											<td style="font: normal 11px Verdana, Ariall; border-bottom: 1px solid silver;">{% trans %}Checked out{% endtrans %}</td>
										</tr>
									</thead>
									<!------------------------------------------------------------>
									<tr style="background-color: #ffffff;">
										<td id="nodeSelector" style="border-bottom: 1px solid silver; padding-left: 3px;"></td>
										<td style="border-bottom: 1px solid silver; padding-left: 3px;">
											<span datafld="filename" style="font: 11px Verdana, Arial; color: #00000;"></span>
										</td>
										<td style="border-bottom: 1px solid silver; padding-left: 3px;">
											<span datafld="date" style="font: 11px Verdana, Arial; color: #000080;"></span>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</div>
			</td>
		</tr>
		<tr valign="top">
			<td id="buttonCell" class="DlgButtonCell" width="100%" valign="middle">
				<div align="right">
					<input type="button" onclick="completeWizard()" value="{% trans %}Ok{% endtrans %}" id="btnFinish" class="txButtonSubmit" style="width: 50px;">&nbsp;&nbsp;&nbsp;
					<font size="2"> </font> 
					<input type="button" onclick="window.close()" value="{% trans %}Cancel{% endtrans %}" id="btnCancel" class="txButtonCancel">
				</div>
			</td>
		</tr>
	</table>
	<!------------------ SUBFORM sfKillCache ------------>
	<!------------------Microsoft suggestion to force no cacheing of documents------------>
<HEAD>
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="0">
<META HTTP-EQUIV="EXPIRES" CONTENT="0">
</HEAD>
<!------------------END SUBFORM sfKillCache  ------------>
</body>
</html>