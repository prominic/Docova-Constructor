{% set date_format = settings.getDefaultDateFormat|replace({'MM' : 'm', 'DD' : 'd', 'YYYY' : 'Y'}) %}
{% set fprp = form.getFormProperties %}
DocStatus:{{ object.getDocStatus }},
DocStatusNo:{{ object.getStatusNo }},
ThreadKey:{{ object.getId }},
FormName:{{ form.getFormName }},
DocTitle:{{ object.getDocTitle }},
DocumentType:{{ form.getFormName }},
SystemKey: {{ settings.getSystemKey }},
UserName:{{ user.getUserNameDnAbbreviated|replace({'\\': '\\\\'}) }},
UserNameAB:{{ user.getUserNameDnAbbreviated|replace({'\\': '\\\\'}) }},
UserNameCN:{{ user.getUserProfile.getDisplayName }},
UserRoles : "[{{ user.getRolesDisplay(app.request.query.get('AppID'))|join(':') }}]",
TodayDate:{{ 'now'|date(date_format) }},
AppID:{{ app.request.query.get('AppID') }},
LibraryKey:{{ app.request.query.get('AppID') }},
Mode:{{ app.request.query.get('mode') ? app.request.query.get('mode') : '' }},
DialogID:{{ app.request.query.get('dialogid') ? app.request.query.get('dialogid') : '' }},
LoadAction:{{ app.request.query.get('loadaction') ? app.request.query.get('loadaction') : '' }},
CreatedBy:{{ user.getUserNameDnAbbreviated|replace({'\\': '\\\\'}) }},
CreatedDate:{{ object.getDateCreated.format('m/d/Y') }},
LastModifiedBy:{{ user.getUserNameDnAbbreviated|replace({'\\': '\\\\'}) }},
LastModifiedDate:{{ 'now'|date('m/d/Y h:i:s A') }},
LockEditor:{{ object.getLockEditor ? object.getLockEditor.getUserNameDnAbbreviated : '' }},
LockDate:{{ object.getLocked ? object.getDateModified.format('m/d/Y h:i:s A') : '' }},
LockServer:{{ object.getLocked ? app.request.server.get('HTTP_HOST') : '' }},
LockStatus:{{ object.getLocked ? 1 : 0 }},
isLockEditor:{{ object.getLockEditor and object.getLockEditor.getId == user.getId ? 'true' : '' }},
isLocked:{{ object.getLocked ? 'true' : '' }},
{% set att_properties = form.getAttachmentProp ? form.getAttachmentProp : false %}
isFileCIAOEnabled:{{ att_properties and att_properties.getFileCiao ? 'true' : '' }},
isFileViewLoggingOn:{{ att_properties and att_properties.getFileViewLogging ? 'true' : '' }},
isFileDownloadLoggingOn:{{ att_properties and att_properties.getFileDownloadLogging ? 'true' : '' }},
MaxFiles:{{ att_properties ? att_properties.getMaxFiles ? 0 }},
AllowedFileExtensions:{{ att_properties ? att_properties.getAllowedExtensions : '' }},
AttachmentsReadOnly:{{ att_properties and att_properties.getReadOnly ? 'true' : '' }},
AttachmentsHidden:{{ att_properties and 'E' in att_properties.getHideAttachment ? 'true' : '' }},
TemplateList:{{ att_properties and att_properties.getTemplateType != 'None' ? att_properties.getTemplateList : '' }},
TemplateNameList:{{ att_templates['names'] is defined ? att_templates['names'] : '' }},
TemplateFileList:{{ att_templates['filenames'] is defined ? att_templates['filenames'] : '' }},
TemplateVersionList:{{ att_templates['versions'] is defined ? att_templates['versions'] : '' }},
TemplateType:{{ att_properties and att_properties.getTemplateType != 'None' ? att_properties.getTemplateType : '' }},
TemplateAutoAttach:{{ att_properties and att_properties.getTemplateType != 'None' and att_properties.getTemplateList and att_properties.getTemplateAutoAttach ? 'true' : '' }},
HasWorkflow:{{ fprp and fprp.getEnableLifeCycle and fprp.getEnableWorkflow ? 'true' : '' }},
HasLifecycle:{{ fprp and fprp.getEnableLifeCycle ? 'true' : '' }},
isWorkflowCreated:{{ workflow_options['isCreated'] ? 'true' : '' }},
isWorkflowCompleted:{{ workflow_options['isCompleted'] ? 'true' : '' }} ,
CreateWorkflowInDraft:{{ workflow_options['createInDraft'] ? 'true' : '' }},
EnableVersions:{{ fprp and fprp.getEnableLifeCycle and fprp.getEnableVersions ? 'true' : '' }},
Version:{% if fprp and fprp.getEnableLifecycle and fprp.getEnableVersions %}{{ object ? object.getDocVersion : '0.0' }}{% endif %},
FullVersion:{% if fprp and fprp.getEnableLifecycle and fprp.getEnableVersions %}{{ object ? object.getDocVersion ~ (object.getRevision ? object.getRevision : '0') : '0.0.0' }}{% endif %},
AvailableVersionList:{{ available_versions|length > 0 ? available_versions|join(',') : '1.0.0,0.1.0,0.0.1' }},
isSupersededVersion:{{ fprp and fprp.getEnableLifecycle and fprp.getEnableVersions and object and object.getDocStatus == fprp.getSupersededStatus ? 'true' : '' }},
isDiscardedVersion:{{ fprp and fprp.getEnableLifecycle and fprp.getEnableVersions and object and object.getDocStatus == fprp.getDiscardedStatus ? 'true' : '' }},
isCurrentVersion:{{ fprp and fprp.getEnableLifecycle and object and object.getDocStatus == fprp.getInitialStatus ? 'true' : '' }},
isNewVersion:{{ fprp and fprp.getEnableLifecycle and fprp.getEnableVersions and not object ? 'true' : '' }},
StrictVersioning:{{ fprp and fprp.getEnableLifecycle and fprp.getEnableVersions and fprp.getStrictVersioning ? 'true' : '' }},
AllowRetract:{{ fprp and fprp.getEnableLifecycle and fprp.getEnableVersions and fprp.getStrictVersioning and fprp.getAllowRetract ? 'true' : '' }},
RestrictDrafts:{{ fprp and fprp.getEnableLifecycle and fprp.getEnableVersions and fprp.getStrictVersioning and fprp.getRestrictDrafts ? 'true' : '' }},
RestrictLiveDrafts:{{ fprp and fprp.getEnableLifecycle and fprp.getEnableVersions and fprp.getRestrictLiveDrafts ? 'true' : '' }},
AttachmentOptions:{{ fprp ? fprp.getAttachmentOptions : '' }},
HasAttachmentsSection:{{ fprp and fprp.getAttachmentSection ? 'true' : '' }},
HasMultiAttachmentSections:{{ fprp and fprp.getAttachmentSection ? 'true' : '' }},
MailAcquireMessagesDialogUrl:{% if user.getUserProfile.getUserMailSystem == 'O' %}{{ path('docova_outlookacquiremessages') }}{% else %}{{ path('docova_mailacquiremessages') }}{% endif %},
UserMailSystem:{{ user.getUserProfile.getUserMailSystem }},
{% set attachments = '' %}
{% set outlook_file_size = '' %}
{% if object.getAttachments and object.getAttachments.count > 0 %}
	{% for attach in object.getAttachments %}
		{% set attachments = attachments ~ '*' ~ attach.getFileName %}
		{% set outlook_file_size = outlook_file_size ~ ',' ~ attach.getFileName ~ '*' ~ ((attach.getFileSize / 1024)|number_format) ~ ' KB' %}
	{% endfor %}
	{% set attachments = attachments[1:] %}
	{% set outlook_file_size = outlook_file_size[1:] %}
{% endif %}
OutlookAttachmentsSize:{{ outlook_file_size }},
DocAttachmentNames:{{ attachments|raw }},
SessionDateFormat:{{ settings.getDefaultDateFormat|lower|replace({'yyyy':'yy'}) }},
ShortName:{{ settings.getUserDisplayDefault ? '1' : '' }},
isProfile:{{ isprofile ? '1' : '' }},
ProfileKey:{{ app.request.query.get('isProfile') and app.request.query.get('profilekey') ? app.request.query.get('profilekey') : '' }},
ProfileName : {{ isprofile and app.request.query.get('profilename') ? app.request.query.get('profilename') : '' }}