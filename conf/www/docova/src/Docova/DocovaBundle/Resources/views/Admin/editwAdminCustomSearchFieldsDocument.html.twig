<!DOCTYPE HTML>
<html>
<head>
<title> {% trans %}Custom Search Field{% endtrans %}</title>
{% include 'DocovaBundle:Admin:sfWebAdminCommonScriptHeader.html.twig'%}
{% if document is defined %} 
	{% set path_info = path('docova_admin_editdocument', { 'view_name' : view_name, 'doc_id' : document.getId }) %} 
{% else %}
	{% set path_info = path('docova_admin_customSearchField') %} 
{% endif %} 
{% include 'DocovaBundle:Admin:sfWebAdminCommonFields.html.twig' with {
	'document' : document is defined ? document : '',
	'view_name' : view_name, 
	'view_title' : view_title,
	'mode' : mode, 
	'path_info' : path_info 
} %}

<script language="JavaScript" type="text/javascript">
$(function() {
	$('#DataType').on('change', function(e) {
		if ($(this).val() == 'text') {
			$('.txtproperties').removeClass('hidden');
			if ($('input[name=TextEntryType]:checked').val() == 'E') {
				$('.selectedVal').addClass('hidden');
			}
			else {
				$('.selectedVal').removeClass('hidden');
			}
		}
		else {
			$('.txtproperties').addClass('hidden');
			$('.selectedVal').addClass('hidden');
		}
	});

	$('#DocumentType').multiselect({
		position: { my: 'left top', at: 'left bottom'},  //required due to content scroll workaround
		selectedList: 3,
		appendTo: "#divFormContainer" 
	});
});
// this is required
function validateDocumentFields()
{
	return true;
}
</script>

</head>
<body scroll="no">
	<ul class="ui-widget-header actionBar hidetoload">
		<li id="closeBtn">{% trans %}Close{% endtrans %}</li>
		<li id="saveAndCloseBtn">{% trans %}Save and Close{% endtrans %}</li>
	</ul>
	<form method="post" action="{{ path_info }}" class="hidetoload" autocomplete="off">
		<div id="divFormContainer">
			<table class="elmContainer" cellspacing="0">
				<tr>
					<td colspan="2" class="firstRw"><h3 class="headings1">{% trans %}Search Field Settings{% endtrans %}</h3></td>
				</tr>
				<tr>
					<td class="firstRw">{% trans %}Display Title{% endtrans %}:</td>
					<td class="firstRw">
						<input type="text" name="FieldDescription" value="{{ document is defined  ? document.getFieldDescription : ''}}" class="text ui-widget-content ui-corner-all" />
					</td>
				</tr>
		        <tr>
					<td>{% trans %}Field Name{% endtrans %}:</td>
					<td>
						<input type="text" name="FieldName" value="{{ document is defined  ? document.getFieldName : ''}}" class="text ui-widget-content ui-corner-all"/>
					</td>
		        </tr>
		        <tr valign="top">
		        	<td>{% trans %}Data Type{% endtrans %}:</td>
		        	<td>
		        		<select class="text ui-widget-content ui-corner-all" name="DataType" id="DataType">
		        			<option {{ document is not defined or document.getDataType == "text" ? "selected":"" }} value="text" >{% trans %}text{% endtrans %}</option>
		        			<option {{ document is defined and document.getDataType == "number" ? "selected":"" }} value="number">{% trans %}number{% endtrans %}</option>
		        			<option {{ document is defined and document.getDataType =="date"? "selected":"" }} value="date">{% trans %}date{% endtrans %}</option>
		        			<option {{ document is defined and document.getDataType =="names"? "selected":"" }} value="names">{% trans %}names{% endtrans %}</option>
						</select>
					</td>
		        </tr>
		        <tr class="txtproperties{% if document is defined and document.getDataType !="text" %} hidden{% endif %}">
		        	<td>{% trans %}Text entry type{% endtrans %}:</td>
		        	<td>
		        		<label><input type="radio" value="E" class="hideShow" hide="selectedVal" name="TextEntryType" {{ document is not defined or document.getTextEntryType =="E" ? "checked":"" }} /> {% trans %}Editable field{% endtrans %}</label><br />
			            <label><input type="radio" value="S" class="hideShow" show="selectedVal" name="TextEntryType" {{ document is defined and document.getTextEntryType =="S" ? "checked": ""}}/> {% trans %}Combo box{% endtrans %}</label><br />
		            	<label><input type="radio" value="B" class="hideShow" show="selectedVal" name="TextEntryType" {{ document is defined and document.getTextEntryType =="B" ? "checked": ""}}/> {% trans %}Editable with selection{% endtrans %}</label>
		        	</td>
		        </tr>
		        <tr class="selectedVal{% if document is not defined or (document.getDataType !="text" or document.getTextEntryType == 'E') %} hidden{% endif %}">
					<td>{% trans %}Select values{% endtrans %}:</td>
					<td>
		        		<textarea class="text ui-widget-content ui-corner-all" name="SelectValues">{{ document is defined ? document.getSelectValues :""}}</textarea>
		                <span class="elNote">{% trans %}Separate values with carriage return. If required, include value aliases separated by &quot;|&quot; character (Example: Choice Text|Field Value).{% endtrans %}</span>
					</td>
		        </tr>
		        <tr>
					<td>{% trans %}Related Document Types{% endtrans %}:</td>
					<td>
						<label><input type="radio" value="A" class="hideShow" hide="selectedDocTypes" name="DocumentTypeOption" {{ document is not defined or document.getDocumentTypes.count == 0 ? "checked" : "" }} /> {% trans %}All{% endtrans %}</label> 
						<label><input type="radio" value="S" class="hideShow" show="selectedDocTypes" name="DocumentTypeOption" {{ document is defined and document.getDocumentTypes.count > 0 ? "checked" : "" }} /> {% trans %}Selected{% endtrans %}</label>
					</td>
		        </tr>
				<tr class="selectedDocTypes{% if document is not defined or document.getDocumentTypes.count == 0 %} hidden{% endif %}">
					<td class="firstRw exc"></td>
					<td class="firstRw exc">
						<select id="DocumentType" name="DocumentType[]" multiple="multiple">
						{% if docTypes is defined and docTypes|length %}
							{% for item in  docTypes %}
								{% set selected = '' %}
								{% if document is defined and document.getDocumentTypes.count > 0 %}
									{% for selDoctype in document.getDocumentTypes %}
										{% if selDoctype.id == item.getId %}
											{% set selected = 'selected="selected"' %}
										{% endif %}
									{% endfor %}
								{% endif %}
							<option {{ selected }} value="{{ item.getId }}" >{{ item.getDocName }}</option>
							{% endfor %}
						{% endif %}
						</select>					
					</td>
				</tr>
			</table>
		</div>
	</form>
</body>
</html>